<% content_for :breed_picker_details do %>
  <table class='breed-details'>
    <tbody>
	  <tr><td rowspan="9">
		<div id="breed-details-image" class="<%="avatar-#{@pet.breed.slug}_mid" if @pet.breed %>"></div>
	  </td></tr>
	  <%= breed_details_row 'Name', @breed, :name %>
	  <%= breed_details_row 'Health', @breed, :health %>
	  <%= breed_details_row 'Endurance', @breed, :endurance %>
	  <%= breed_details_row 'Fortitude', @breed, :fortitude %>
	  <%= breed_details_row 'Power', @breed, :power %>
	  <%= breed_details_row 'Intelligence', @breed, :intelligence %>
	  <%= breed_details_row 'Affection', @breed, :affection %>
	  <%= breed_details_row 'Favorite Action', @breed, :affection %>
	  <tr><td colspan="3"><p id="breed-details-description"><%=@breed.description if @breed%></td></tr>
    </tbody>
  </table>	
<% end %>

<fb:editor-custom>
<div class='breed-picker'>
<% cell_table(@breeds) do |b,idx| %>
  <td onclick="return breedSelected(<%="#{idx},'#{b.slug}'"%>);" 
	  class="radio-cell avatar-<%=b.slug %>-small" 
	  id="breed-<%=idx%>">
	<%= radio_button_tag("pet-breed", b.id, (b.id == @pet.breed_id), {:class => "input"}) %>
    <span><%= b.name %></span>
  </td>	
<% end %>

<script>
<!--
var breeds = [];

<% @breeds.each do |b| %>
breeds.push(<%=b.to_json(:include => [:favorite_action])%>);
<% end %>

function breedSelected(idx,avatar) { 
  var breed = breeds[idx].breed;

  document.getElementById('pet-breed-id').setValue(breed.id);
  document.getElementById('breed-details-name').setTextValue(breed.name); 	
  document.getElementById('breed-details-intelligence').setTextValue(breed.intelligence);
  document.getElementById('breed-details-fortitude').setTextValue(breed.fortitude);
  document.getElementById('breed-details-health').setTextValue(breed.health);
  document.getElementById('breed-details-endurance').setTextValue(breed.endurance);
  document.getElementById('breed-details-action').setTextValue(breed.favorite_action.name);
	
  avatar = "avatar-"+avatar+"-mid";
  document.getElementById('breed-details-image').setClassName(avatar);
  return false;
} 
//-->
</script>
</div>
</fb:editor-custom>